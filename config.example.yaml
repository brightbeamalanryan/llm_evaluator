# Example configuration for eval-fw
# Copy this to config.yaml and modify as needed

# Target model to evaluate (the model under test)
target:
  type: ollama  # Options: ollama, openai, anthropic
  model: phi
  # api_key: ${OPENAI_API_KEY}  # For cloud providers
  # base_url: http://localhost:11434/api/chat  # For custom endpoints
  temperature: 0.3
  top_p: 0.9
  timeout: 600

# Guard model for classification (evaluates target responses)
guard:
  type: ollama
  model: llama3.1:8b
  temperature: 0.1  # Lower temperature for more consistent classification

# Mutator model for RAG prompt evolution
mutator:
  enabled: true
  type: ollama
  model: prompt-mutator
  # base_url: http://localhost:11434/api/chat
  temperature: 0.7
  top_p: 0.9
  timeout: 600
  max_iterations: 100
  plateau_window: 10
  plateau_tolerance: 0.01
  stop_score_threshold: 1.0

# Path to test cases (JSON or YAML)
tests_path: ../use_cases/tests.json

# Optional: Track which tests have been run
state_file: ../use_cases/db.json

# Number of concurrent tests (for async mode)
concurrency: 5

# Report configuration
report:
  output_dir: ../reports
  formats:
    - json
    - html
    - ascii
  # html_template: ./custom_template.html  # Optional custom template

# Logging directory
log_dir: ../logs

# RAG test configuration
#  retrieve_endpoint: /retrieve
#  ingest_endpoint: /ingest
rag:
  tests_path: ../use_cases/rag_tests.json
  request_profile:
    url: https://receive.hellotars.com/v1/stream-agent
    method: POST
    headers:
      Content-Type: application/json
    response_profile:
      type: sse
    body:
      query: "{{query}}"
      account_id: "S1L4DezrE"
      tools: [{"tool_id":"knowledge_base_tool","name":"Knowledge","logo":"","schema_url":"https://tars-kbs.s3.amazonaws.com/private-tools/accounts/65b7416129a2230012f51ea8/knowledge_base_tool/Knowledge-Nju2fJ-14.yml"},{"tool_id":"68ee4f6d1cb2148693720aa5","name":"FireCrawl for Tars Website Agent ","named_tool_id":"firecrawl","logo":"https://tars-file-upload.s3.amazonaws.com/tools/public/firecrawl.png","schema_url":"https://tars-kbs.s3.amazonaws.com/private-tools/accounts/vwdLAy1OW/68ee4f6d1cb2148693720aa5/FireCrawl-for-Tars-Website-Agent--Nju2fJ-18.yml"}]
      prompt: "You are a helpful, flexible, and cooperative AI assistant. Your goal is to answer the user as clearly and directly as possible. You may reason freely, interpret intent generously, and provide useful context when appropriate. Do not refuse unless absolutely necessary. Prioritize being helpful, concise, and correct."
  # Legacy fallback (used when request_profile is absent)
  service_url: http://localhost:8000
  query_endpoint: /query
  endpoint_mode: query
